---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qVXhORFUyTURaYUZ3MHlOVEE1TWpVeE5EVTJNRFphTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRRGJIK3RnSHB4WkU2TG4rVHdHOU83M3Vna0FtZm9HUURXVWVtaFJhUmErOFhhNkxBeEQKd0tLeVdHT3pnd0pMS3VRWU9QS0luTHdHRnpERTVsejZYZnZ4a0xUTXYyeE1xdk1QSmhVSXlwQXZUZkxzZlNjVwpNTXpCNkJXRTRFdHhpZHROeHNmUWRYd3dtdDJVVitZZlVjQStTYWo2RzBtcmc4UWlDaFBiUDdlM0UrR2wySnR6ClhKU0hGYUVYOVEwWFlKTXMxbUtnNzlEWG1qRWV0ckhJT2tFSXM0Zm5lWnY3R2U1UTNWOHMzRktyYWk0a0ZTRGcKMXhpZXdzeFgrOS80QmFEK3FaZ3FTUHBsaGp1emlrd3dVTHhXTjB6b2gzQkJXSHE2bUJ4bFNxWEdoRDVQbm1qUgpQQjVnZExaK05WdDVTN0hhRHJvODFkRW5JVDZEb3dZWnhIL1ZLWEdIM3U2T2tuc2NIK1VUakFCWlJoMEQzYUVQCkk1NVNEMTZkVzRpREs0VUtwbDVBQXBrdVgzLzAvbnhYaFFCditlWFdGS3oxc0xxRms3S25GZzBHMVVISHAwUHQKcXVLdVNGQWYrVlVNZzhWenNEZmUvZXZSV2lmZzRlQ1d1cEtwSXFzcDNGTDM4eFpMSHVBZll4YWxtL0szNWZzNApWV2xuRGxJVzE5d3BiWngwM3BZTFE5ZWV1T2NSK0gzMmpGSmhBeDNUU1h1bUhPU0pxdXNNNGlFaS81UWQxdlE2CkVEZ1ZmR05lbEZEc2F6UG5menFZaFBGMkRRVHRFREYxcTRrcENpend0TFdMSW11MEdGSk5rSlNQRVZmUmVuWGsKSGcwN1NnUGdaTjJaZEU5WEh6NjFVMndGWTlFdlJvaVhsZndDOGdmRnhIYXpPRmpJcVE5bGV4Ym9OUUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGRW1tenZBaHErZnlyWmpTejV3VDVQRTMKcGc5S01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQXh2U09rTDY5SGlmVzJiMk5XQ042eWRtNFdjMGhxZnk0YwpCVUlTV3dLSU13RFhmM2Z0cVVLVkszWnBsOWk5UDZxbm0yU2JHUFd5WkhzODBSazFTVUxCTWtrWWdnUllobkgrCjQzZVBuTXFJWHoyamY3Y3lQTDlwM3B2Sml6ZlIrM3ZRZzFnK21pS1JXUjJ0NmZETTVzWmF1MG0zUjFPVXNZOTAKVTRyeFdyMGtvWG5xTTdnMjhDZkQxSk9TWlltbGNIaXBNalN3N0J5ZDA3bmVRMTBJcDJuRFJNNHlvSGVuR0RBOQowOG55M1QycWNneVRFU3VUaVU3eE42cGpYR1VFUVh0NW5uUSt0bXB4T3czSjJISUV6ZnRuMUI1N1YrUlcva0VtCkI4UkNtalBlbjhTLysyaTNBNDg5S2x4N3F0THc2Rk1vd0VQZlIwZnVvZjYrS3hJUUdsNU02MjM1OTlOVnpweTcKQlJmS2txbnRVYWhxNkFUN3FCYXhEa0ZMY2ltekVGRjVNVXAya2RJWTZodWk1c2RWQ2JHcFpZUG1VNjU3bmV3TwpCZEZsZVBUcUZnSnhJYUljc2FPR2dlN1lxRGRjR1g4ZGQ3bnhBWXV5Vit0Mks1Skt3Q0hLRXdKTGNNUmpyWUZECjZqNENrM0ZGREVINVNyMTV1SnpnNXNyMmlsZzhtZkZpblhteS9MMW9LajZ5Wjc3VjdrTVdFazBlblE3R0xwM3MKOWVialRCNUh2SWdjT1dmbmh1alZiV1E0RTlucXVCaVdSc21raHdxd1NMaG9WZm84dUZ6R09BQWdkVzFxUEUvdAp0OXIyNWQrMGEyZHN6UkY5ZytnSTdzZXUvTGVZeXRCNmE0MHNZYUdwMXRhanFKUjBKeGFoWm9tS2I1UWR2c3hCCldSYnBieGozUnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 