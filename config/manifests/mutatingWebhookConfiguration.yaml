---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None 
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qY3dOalUyTURaYUZ3MHlOVEE1TWpjd05qVTJNRFphTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQzh6eC9GRlVDOGkwOUJZSGt6aVVkdE9OWTlFelZqalJDb0FWZExyUUxLL3J5NzJLblAKc3ZpYkRTMHBDblJpMzZMRzczTHpjT3JDTlVEb1luWmdNWUhibElwMGdtNmpxZ0syQzRhUlMwTC9XZ2dWOWZyeApRQ05NTUhydlcyNldVMlFPWmRDcjAxdkdheTlRZDBPdlNldnpwSzhwZmlmbktramsyNFI3bjUrcmdsejJ0M3JJCjRPYTNNa0Z1U0Nic0dJWVI5djNPYVBJdVNuYk03SUYyVkNRWlM4eTc2M3VjVVU2SmFzbnVKblZyYjRGS242bXMKa1RJMmRsQzJaK3VMRm9FY3pocHRPZnNWeDF2MlBJZExRdmMzQnN5ZDJsSjVRY3B0bVhxelJFa3kyZXhDcVZuOQpNUkl6MzFZUVlnakE0M2I2ajVtcnhrY244eTlvaUpaNXJoU2podEZxRGNuVUFXVm1RWlhacTlUSVMzWjRLYVBrCjZWRm0vY1NYcUE1YzRONkpjc2ZxbGxLZituQkJJck02MUw3VmJqdlZYMlpGb3BzeWZQYmFnZElmRml4U3A4dHUKTmp2WHZKQ0ZhcWpmeGtBZWpWeGdxTWsrWG9EU2k0ZXVpSzV6UFducXdoditRZ1l6T2ZXRkJlUnBFT2ZJN1JQSwpXTUhOV25uQXlUcWZzeUlJSy9BRHh0RVNUdEVUd2FEWktveWVBbml6SDR2MC84UUNkWndwQXFWeC9hNDNoZzdCCmlYOTBqM2VleWFUdmVDa2VLQ0dWazY5YXh2RHdmL3hncVlEbGVhRVh1emR5WEhWWWU0WllpRlZaV1p2SW16NmgKSWlQL2o0cGdTaGlvVExicW5EV3Vrc3JWSThvL0ovMy9yb2R6SHg4TVFZdXB6OUlwa2tPbWFHamxDUUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGQXJwRktoU3RQYmRUR2ltSUJUMGdaZzYKN1Z1bk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQm0zcW85R3ZLTDVIRVAxTXN0VmJ4aDArdzRJZVlJYWo4WQpnMnBucm0vVjNjUStqWjdsRDh4R1ljMUpRdmttNTRFRlE3WFM2T0RzcU5IWnNlWm1JTWoxTlp3YjJ5WUlrbnpoCjhDMm1QOEJFcUV6T085bngzcXBxUStjQkZLMENEOSsxaEpOWHNMUEE4OEN0ZWJCdWxCUjR4TUp5YmVWRWZlVjcKOWNFWWdrUHJBTFlQMEphVjRmajNFZTM1bzJkM0VqQkRzTXc1amFyNFNlMDljVzN2VXNZdFFaMWVxRmFvSmIrNgprbEZWVUN4S2VncFZFcmJyNUQ0V1B0Wk5xZjZXNDZQeDVieGdmVXBXTDJhRGY1UnNzempnUGluaGJtMEV3OXdyCjVZZjFJV0RkeFVjeUNLM0x1VDdQOENWa3ErL2tUNGgxcDlGRkdXSS9TS2ZtY0JnT0NMbG1KSC83QTZ1L3NmclIKd25OeVJwcW9Kb2FHc2xTNG85dkc1RDVUcFJVN0FNb2Qwc1NTUmphbGJaQ3F6blBQek5JdEVja1c2QXdoUGM1awpYQ1lnZ3YzTGxMWDc3VFduODVJa2RreE5IN1BlQm0vWGlmY0QycXg2eWFxM0FnS2RGYjJVVmI3VUQvU0ZUT05BCmpzNzNJN3pSVmMzazcwZjViTVFnYnNsZ2wwMHN3eXhGUitVUUZNTTVSakJMMWE2NGxkc0ZvUnVKMmdqUnIxOHoKcnNwbXJIc3kyZktqc2F1L0tydzVYZ3ZJSDdDQVhrd29NQjQyUWJxVWZNYUpINCsrN3lLSTVXaVJTUWJjMHdqcQphR2tpMkhvTmZVMGhKUTFwc2ZXOHNIbFEvaXo4L3ZQb3NLWjJmdFVpc082azR6QVJsK2hUdVFFRXYxZ0hGMWhmCnppKytzWDZnUkE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 
