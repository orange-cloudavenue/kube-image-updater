---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qWXhNakV6TkRKYUZ3MHlOVEE1TWpZeE1qRXpOREphTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRRER0ZkFHUjgwV1NKdXM4cXZzWWVTTjNIL0FacDdWVXltNjNvck9CNVlFWVlyYVJMTHMKOEJxMy9XNUFIUXNqSTNYT29sZlZtamxIMWRHb294Ym02d25Cc1dGSnE5YXBPT2UwY29FVHVwOGdrRHVBQ0hNWgpEUHM4RjEreWMwd2NUeUcvRXZjSEsvRHIyajdDK2hHelRGN2k3aEZGdTZ3cXV5UzdYTExxSmdyK1pzcFMwYmw4CkpxR0lpb3RQSnF2cThXZG5oUllCVGphSFYzZFVvMXI0cjFNK0ZlblNsY3BxWU5oWjJrSFpHM1ZvSXplSlFTUlQKRkg3a1JuMVlpMk5DS0IvYnZheVJnQVdWOUE5cUt0d0phby93TFhZdDVkU3RqRTR2eVZKcUJIY3NTaXNnNTZxbQp6ZlZ6MkU5QmtYNGpzTjNZTTgwTmFoc3h3cWI2YmtTdVhKa3hxYTRoeDM1SUYzZXIzSU8zbGRuODdmQXBTLzlPClF5NnB2OXpGSzlBU1NMRUZPdVk5cjZYUWlOTnV0ekFXV0k4a0lqVHY0TkllUkgvSzFSb1FIZEZuUmdXVW1jYzUKNHMrdmR5SUFqZ29aUVhJZG5MOFBabVZEd0haNFlGY0l0dmFoVUpHMkttUE5KckJoTVcySVRTYVlHYThoclY5YwpGOG8va0dQdmsvcUpLUnRZWnVrMXAyemFGdmRFcjYzalRFaEF3OC9naktsSmhCWE9PWjVUUUlKOVVzMko1SFdGClczYWNYSHJTWWxFa3Rua0krOU5BaVFLUGpUK2lKTytBVWk3cXVFVzFyUlVidEtwckFhVUFVQ3VoenliZWR5NkIKdTlTMy9qYXpaQTVBUm4xN2RXTEIwckVkR3R6b2JBa0gvS2d2bmVIMldYTi84NnVjdGhzVFRzZFV0UUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGTk5uM3BkVHE5bXFCOFRjd3FuRmZBWmcKYitjZU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQzVpUnJZRllaY2w5czkyNnppZng3YzJpRGlYcExXampQNQpqTlN2emhaZlR4RWVOdVZOM0tZU3BUR29lWmVWM3Q2WU1CNWQ3bzc3dlVMRkVZYzgzMGlKNWRqM0UvSUx5Wk1NCmYwODM3QXVOaWNaT3hNbHZSMU1DN21uRGRDSkU3MUxOK1gvU2Fka3c4WlhjTjlFMGQ5cTdXMThscmE1Rm1hZTMKVjdWRVozaGw4U3ZPTThSZFRvRExPL3BkVllpV0k2Z0l5UHB5RHlRRDJkN0wwYVZZZ25PQ1lUd1I1RncvUnE3OApDUWsyOHNMZkdyQm0venVkb0h4dlJJUmw5L1BPVW1IenMyQlNSM2RldUkra1NLTnVYYktjdDRBZ3NZeTNEZWdFCnpmcGp6V05Tc29xRFBCSk9hd09vaEFHcEdKSGU0UnkvQzErOWlvQWRHTElvK2xUVDVhdXlsZlhNUXd2TVpyLzUKUC90NGpyTktkMVVEWW5mZVlzcUdGMnIyUjNXM3N6azRkSGpCNS9JRlRndDNMREtQL0NPVHlkd2pIUnRuUnZVMQpYR3ErRitTWGIzcTlqU0NVRWNkRUo5SmNBK2Ric3VSeEIyMm1jSWhMUG9EUTY2UEJDN3BmNnMxSDJRSTJ3TjlwCmIwTmZuSzBvSGw5RTVmYmhCSEtJaVJtRThld2Z3TWxpRnVkRDZSR1V3ME9CdUNkY2RTbENabzBuYzJnTTcwbm8KSmF0cTZRREozV3pMdnNWbGk4OE04bC9Tcnk0WW50MFJON3pUazMvSU45Y0I2U2g5SlJiZ3NkdXYrRlRJYjJOYwovYis5U1lXWVpUc0FwanRwa2dkcVlPWGVVZGhKUjZ0SXMzUUF5Ykx4cmtpNGVGSzRtZDY4bUFkVjhLd3A5L1JwCnhpQ1hwMFMxMkE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 