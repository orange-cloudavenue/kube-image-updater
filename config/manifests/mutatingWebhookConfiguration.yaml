---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU16QXdPVFF5TWpGYUZ3MHlOVEE1TXpBd09UUXlNakZhTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQzI5MWorcW9kYVozV2dIb2dnOWdGUnN6OEUzOTBxWUk0aTJnbGZFRDdrSFcvRE1hTG0KYWp5MDJXaU1RdEgya0lxOE5vQUVmSEdLMXd4SldrUXVVVWtvRTFXcmVxd2xsV2lsdWtYdjRjWnJ1c0FKRFlCZQplRWJZbUd2R3R3SHJ5OGVZNTVSOG5mdlZuUkR1eGg0UHEwaklmSlJNL0oya2tvM2pkbHFpNlpxM05wVlFudlQrClJPMTNJaXcxSlJmRDI0Y3FFdEtzUGFNZVdZb2wzZFpOYTNCT1ZWM1FtbUVMUGxuQkF3ZE1saGFObzFEZ09wUVkKVEViZTgrenNSaEd3MlowbzY3RkJSYVhVYkVzLzZwdWpHV0lsZDZ5b3lKZ3R1OG9jNURuVHNhaE9PMEVFaE9IZgpMMzJJQ2N4WVJJanNNbWZ3c0UxTkJBMUx1SU9MZ1NiajI0UkY2cUlDYWZPOEN3d2dJLzFMdW03eEZFdmVWSEl0ClovTE16WUVoYkRwUkNOdlNIK1BiZDllZjQ3NGVpU1VOd3NHUmVJZ0RGMk5iaWFQdXozNlBWWkxhRVZ5MzZNYXMKTElDRW1wMkozNzhrdWdUNDVJVTllVCs5U0tQT3hGQ1pCeW9FUHNGckhTVHNrOEgvVVRSTW92eGk4enhiR0RCUwprV2hNMmFaT1NOeUN3SDlnbk1jQ2hRQ0dZeUtuS2dta2pnUlFLdEEwYlByN3dHMGZaNDlGQklpNkt1SnBqdElZCjF2ck5jQWYvWERFUHVMUi9OUllsTWZMdWI0MmVqOXZOYzlSYS9kbGxLV2hhTGV4VlcxYkNvZGg2SmVNbjVkQ1IKWFNTOUpoV2tadXhEVHpsVE9tRjZkWStqbFVCTTUrSWx4VUNDeHdoMEtmRzFBb25PZjBDR0hXd2JPd0lEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGUHRrblRkSlM2MUgwRHRZcTBUZFNxQ1kKcUtmaE1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQTViVm1iYlI0TGdwTFFyTDhCQ1A0b3QzVWszaTdaOGFHeApBaDlhWjdkdHUzcmttS0lJMDF5RUJ1OVM4L1U1ai9uNXRNSkNjYWxuY3BlRGpvSUxmalNVQTdUUW9IZzNCR1JtClh3WGFUMWFCUU1NSTQwSS9sWWQ3T1YrVXF0b29NSkEwWFhXbUFJS2FldDRSZGVhVHdkU2M4M0RlZVBjWmpSV0oKMHgwMS9wTnJhNXE0MW1vK29JbEllUlpaNEZ1L3RpOW8wVGY1UjdrbHdINVhPQVgrcmVsYmRqUzd4OFNiWW9lYgo3V0FGaVdLTWo5U29BODFLU3B0Rm9KV0cxQ0tpT3RGb1JrVjNhbFA1YXQwUm1JdGxSalFUR3AvSFdZQ0RDNmFCCk5LNHExVWRSOWlVQWtZb2p5cXdvTzVBYVM2YTg1dWVPUnRzdWtYbGo0UlFKM2Y0d1R6dnlqMHFwV1NDUFl1MVAKMG1yVzB2MHR3Ujc0eDFSYUI5ZHowQ24xbFhRaUtlYksyeFM0OG9hNExManQzRnNoanoyaElCR3hCRGpnZXZXawpzLzg1NHJvais4M05paHEyeGRjbHhMcndSUDdTcDF0WFZ4NXlpREh1dmJqZlBNbGVZUnlkWXpvbVAvWlRYU29hCjVURVR0cGJhdWsxc0k3RWR2Qmh4VTBOTVFRQW0zSDRtbmkwd1pGcFRwdDNGYnJSeU05M3FuUmZQVFNER3U2SGIKb04zRkZyaDdkRmtYcDRjZHZuN01FcDJtQ1NZZndsNTVpMWlGV3R6QTcxa3RjclVrWEVqTGsrYVo5eSt4cEpHbApkTnc2ZUJieU1pYWRBTUtMc3RBZjkxMEY0VDRiVlQ3aVIxbmRrWTg5ZHF1dnVaUzZITVFlYVAxMXcxR2ozLytrCmhNWDRyT2pha0E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
        scope: "Namespaced"
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
