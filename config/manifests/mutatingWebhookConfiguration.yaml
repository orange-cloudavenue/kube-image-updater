apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRFd01EZ3dPVEUwTWpaYUZ3MHlOVEV3TURnd09URTBNalphTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQ3Q4OXBJWFZnTHdJakpkT1dOci9PWFFsaUpTOFRzM0JheXc5RUxZNnZQaS9QVUlVbksKb21FVmNPNnlZbjRqeHNmeW41bWRGSWw3RmMxcUxaRzlINjYvZkpXT1BOK2Q4SGY5dUdTV1JsN3g4Y24ya3VsSwpLcEV1dytheHcvaW1STi9IYXZ5Kytxbllib1BTdXZKOUZIdFhYSmxRN0JiZnBpSm8wZHdZMmdacHBOY2FOWDZoCmlrdDlRSXpqRW9VbjZVZXdJTHpGY3k1dE1sZmo2Qk53UDJLVTVIU0NXZEJEVU83dTlQUG1VZ1NUbzFvYVkrbFQKL21qak5jQmRZUnNhNmFMK1RvNC9BV0dzS0h5Q1RtN1JWcVBiL0NYUWJaTU9pc3dMOXdZV0gwSjhhYkVUeDFnOAoyTEl2RVlYeFFxR0JXbkNEelZVb2VqTjl5UU4xSjNIWmQ1aWdoVldkWnA4QnRwM2FhSWphTy9EcXhKSzExL3lOCjNkWlNBTWFVUjBZU3Aza0JwelhoNDYvT2FUQWpycW9GeGt0dGp5RmI3YmsvTXltNG14ZXJTeWFQajJQMmlXNXYKbmVSTGZMQSs0K2NzeUxYZzFMU0w3cCtSdTBJeEFHTk96c1d5dVlHMXlJWENuRkIwY01RQkpWbGJXSFA5YjR6WApBWWxrQWNnNmdoVmhndURXUEJMQVc0NlFXTUptRHJQRWE1OHExbXdLQ2F0MVFmZmFzaGxQMU9yb0tGL3h5Z0VrCmVnM2JOeGZHMmRuSEhTZDQyMmtGR2o4UGZjMWlkM0kwUWdOam1JVWpMUEpSMGdsN296b1hqc3laaGZjWkNPWFUKK1EwMDF1ZDRJTmE3Y0lhSmZXRkVPVEpwZ0pKcEhTcU5iUXpYVENNclc3M2dHSkV6UkppbTBNUjd4UUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGTjZOY0JnTjRURFp3cFI4TXJJaHQwSlUKOW9RV01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQkN6UGVUUUZoK3NKU3Y0WUZIeGgyb1A2Zi9oaTN6VjhWego4TGNVZm5uQzdkWnIxa1ZBQ2g2MUNwK1o3aFk5c2VLUHBVaVhNS2VPeTh3N2UxcHhRTFlCMm5pU3BQd3ZRb29GCmYwS2FrSEhHQ3dwbW9BYjZCY2FKblN0N2xiWXNNK3hFR1BiNlNYM1kzc2lJRStHdUdwdUVFTDZFTVFVYmM2YUUKcHk4ZjFEVHMweU9SZ2hFSWtEUWFpaU1EVHZuQ2xCc1F1eEZtYjQrMDRqQkhoZ1VxK0xId2kyY21hbFl0RW9OTwp5YlIvS0hnd3pXVmNaV0ZyRG9saDczZlEwM0xtZVRibUtwdjVVUEh3MTZyaklXei9yVkxBcS9Qenl2TlNhVE51Cm5vQ0VUakQ1bEVJQ2RzY1pTbmlUcWlueVBPS2EyRGJ1a0dqMXNTZTB0eHBiVHExaGpxOTB4aXAyaTB3NTN4d04Kc2M1TUVpRXVNN3JDbS9Zdk1hMlpkbm91UDJsSDZIQ2pxQzRhY01FdDlwS2tTOFlpQ2p5aTVpbkpzcGNUanNsawphVHJMeDZlMEZwZkdKb1pmQ00xZ1Q3ZjJvRnIrZ2lwQWRDVU5NZUlZYURxdnB2NDNscWIyTXlmRGlwLzJ1MU93CmNOWnkwdmRxZUlyMG50MTU4alpqZ0R3VXVoU0xpdFUzajRaTk5EUW10N1QrbkhCSThiTEk3aWlHRUVzNHdBbkMKRklKRGFmQ09lWkozdTFYNmxTa2JlcGY1SXB2WkVpanlBWEIzRDh4NVJqSVBteGZzVm54ZGkwZ1pTTHJYbkw0ZQpIUUhiTzVhZ0lhQ3R6Um1oRkFkMU0rWlZhK3FMYUxsa0RoZFVGNUptVHJIbnZMT1BHV1RQdWRIRHNGZVpSTXhyCjFOdDVISXlpeVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
