---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qWXhNREU0TXpoYUZ3MHlOVEE1TWpZeE1ERTRNemhhTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQ21iQTFPTHFZenBjK1RkZ0s3UXNLMGh3My9DME1tZWV0cTVVS2hXd0dyTy9xcDBad3gKUWtGaUEzRUN4c0tweHlhYlRaUGNKMzJSdmtOL3NPUHBuRFZpSkJNUHBpL3RVcktLcklJQ044Zmx4NFdiemJsYgpVQ3lRQm5yL0ZrcFFXdmJPQWU1S01ESEJZV3VjM0cwVkx3S3VsemFSMm90UHlWUnhZNC9MdzkyMHZWWkRMeGxiCkZoajFzRUhYcFJWS2h4S083Qzl6UDl0UG1JL2RTNGRoRjRYTFhMMFM4Vk50Vnh4YVFBQkJ5N3R3cEpmZGp2eUsKM0xFakwzRmV6MXlUYndiVE1XT1RnM0VYbGZLSTZrTkhVSVVCWWtpRmZIRDNDblEvUlFTWWFSRmFRN3RaaVlreQpBNXpBZm9UblRWdDF1NHc1Yloyb2tsNzgxaDBLUU9FdXMxclVHeVNqRmEvYlNYd05kZjN2bDRYQ09oQUQ1bFVPCmRjTnZoTGYwRWFEWTc1UkFiUjhqVjNxOEVMTERoSzlpNDdyKzdjcEVkbjhNNi9yRi9ad0NPNmN5bEJBOWRwcHoKL3BHVDU3aUtmMFdPTFlvbnZWUUFTc0ViSUxKM1dBUEVXeVBKQTZLa3pWbElRa1JJMHVuVGxpRFh4SW5VeVQvZQo0dTlhbGxXYnN4NG0ycndqNjRWOE1DN09BTkpYSjhUUVM5VXBSZFYybTV4clBOZi9rTEpYZnAwV0owalp4a2FoCmw1UXFzS0FVZG54Y3lER1ZHTFdhM3hEM1pBOTBFS1ZjK0NEVDJ2cS9EOU1XM0tpcWUxSmdBWjBWQWxORzRHU2sKaWlkeDJRRUppdGQ3Q2doWnZKeFlLRS82Mk1vMi9TMHFzT2cwT2NKY3l5d2dlNDJkT0c5dzJidHdQUUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGRWtwYzdqZGpkWE5SRHUxUWFSdDJIUUcKMDdoVU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQlN6R3NsQnN2c050b3A5RUcxbThkUXh0emFHZzU2S1FqUQpuQ0g2Mm1xcnl4VW01bGx1MVhIdzNOeWlCV3JtTnlBdDlRRlZyT2JQRmhqYjBQakNoOC9NRWlRSVBBTHlQWjhJClhLVHRLaWdUb0FSNlRyMFdjMHhmbVlJQk1YaEtuUTl3NWt5RVNOQlR3WlF4Mld6enVlTmlnWjhxRWNuY1pZSU0KYnVrODVxN2tySUxHcDZqWmlTTitQVjIwem1teTE4YjRxUVlWdVNvNzZZbFVmZEs4dkhnUnBSci9BMEZsOEZ1WQpybEdpekR0eUtsZ3UwdVlyNkNsUXJRYjNDdnBLSldSUHJLR1BmSVRqL2M0eXlnSXdqUHpWaXRkaU1QdzlDRTNDCmpQaVlSN0dlU0pJTkR0bVFXUjN5K08yWEVsUDFXZUgzSHc4WklQK1Y4dlBOT2ZMUzZJVmpoL1piaER2WUtJa2kKSE5lRzhxM0pjMTRuTmJ6YklWN24xY09SMkdvdVBad2tDTlJQNXVtTzJBenRzUksybXRhdWlpeUU5aUtrSjd0MgpIVzI3bkttZktyVlUvYzV1NXJhVUxvQTkzMkZTeUZ1SnhhZ0JQN2tPbHpEOXNrSERRZmRpSHgrVUtycFlhWUVXCithcnB2L1I4c3FEWEZReTZKUnFPZit5emlSNEthOG5Jdi9nOXZxK1pFSVJwdStSd1MzbmNoZk51M3p6ZG9iU0cKcVJoaXRIRHVkb0k0OXgyQ1pWc0NoaXg0QVF3aDY4RXNQZjNUOCtSRVpzWUtnMHBwMnpidE0rNjFIc1JuV0lLdQpBdjNXTTgveVlBbHl6eURsb3NSWXJPOW1Xa2JaelZwU0d0aTNtUTNqQzlmTGUya3hPMmhTd0NPS0ZqOGNLRFVvCjFDcWtKaE51V0E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 