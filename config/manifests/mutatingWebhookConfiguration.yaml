---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None 
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qY3hNalExTWpoYUZ3MHlOVEE1TWpjeE1qUTFNamhhTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQzNKeW1LNjF0UEJQUVJJL013MldwekZlckpwN3YwWFFsK0tuc1N2ak5NWFUrNXJDWTEKb1J1cUwzVkxNQnN4ZXl3SlVxZ3k3dllJWFZOOFZMT0xKS2VDem9ybUE5dVlVb3czRE9sTzQwMGFuOEFNS0wzUAovWHl3VGltRUJqYXU1WHRRVXRRU1FodG9GRmpTUWRGdVlya1Q5Y0YwKzEzRmdSOEJ5eGN3WUQ3RTU1K3RZWUJUCktmMWdZblNBTzJmWkpybUxTWHpzYjBSS0F2N3lXQVpkd2ZZNCtNSDlMQUFjNzNVSzhOUjZVeStia2k0WXNQSFEKdDMxUXpWR1h4UlJGclFkUS9ER1hFVGRRbVhVdjlRc3dvd2tMM1BYZllrdmE5VmQ2cWVZYTBZMlEyVWtyTG5DdwpoODRONlpWbVB5UjBYemVWOTY3NmNTTm83Nk4wQVFJNmhPTi9BL1lYei9LMXdHTWxYd0RWQ29tMDl4V0hzODYzCkZHSDQ2S0EzZDZMZ0doZFhaYkUzSndzWkorakh5UDZIZ2N3NHQ2a1pBc0MrQ0wzYS9uZGptYmZzc3RITVRhaHoKS1BpaWY5elNOejd1TVIyb29IeXg0VHlEaGZFLzFRWDRhL00rLzFSM0hidU54SWlnQzVKY3hRZ2hFaVhPczdZQQpNU2VrYVZnOTM4YWF2Ymx3NzI2ZHBvVzJNZFk2K29VMGxhUnAyUnVxQTB4U2RGMlZ1N1h0NHBLdlpPZzlxejAxCno1blVYa0lZTUtyd2hrWi9ZVW9UNEVZN0JiN3VSYmJZOGpvWnA2aS9tWWx6NnJGVjdBaFBGelJydWZaa3JHeTkKV1ZVanVySVZqTVpWb1dvOVdsTnNReTI3K1hDQnltOW1WdG4wOEdwczkzcTY0UTFCaFIwMjFZU25aUUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGQ1RrV0VBZzBnd3lQam5aRml6SHdZa04KZGVrak1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQnVGazJWMEJjN2VVdDFEZmM2czFoRklLL1QwZEpYSVFveQplSXovZEVhaTRxdlNiVks1a2RjcUowQmdabWk4dkY4Uk5FeW5xNXUrNVNHek5TSzMxWDA5dEZuOXhMOXNkWHJ6CmY0TW5ia3VFb3dLMFZUUzRDWXFKREVQVHZjc1dYZjd1VXhGaThCbi81T29xNm9qUjIvUllCTEtjQXp1emVIYksKM3BSWXNRbEJDZ0RQUVRvRCthRWhFVXcwbUlqc1pSQ2F6ZWwwNmpBaTFBWHJyM3duWDM0VlhPOHVYbnpJNGI0YQpxSUtDaHFMcjdNNEpmTnZaVXUzWnlXYkZOREVVNDFQWWVqNVpFOEdLV0xOYStta2xXb3ovdkV0QUh3c254Ull1ClFrOGphdktRYkVCY2QzK0I1a1NwODh1Q1NxeDdPeHMxTEw0S2orODZYR05iejNnNFpUU0F5UWlaaEVSSERrQ0gKKzNhVFhURlNpbWtZRmZ3NWptVWtpUDdXUU1zODJkRmV4OXh6Lzl2aTB6MFQya3M5UWpTTXBqaWR2Nk1UenpvYgpNOXdKcVMwVnUxU2RTWE9iN2wyM1d6NnlGZ01FZGN4NzhxakFaOFNuNnE2dVJrdnB4RnZrZHpjR1NKVlY2UXlhCm9yVm8rYkpJdEhUQ3Z3T1ZqR00vWEhReHAvb2c1MHN6ZzZKSUN5MXB1TnFZaUFtWitXSENIWmtNdTluRHl1alUKTnF4TDliZi9wMkI1b3hDa0xRSUpLcW9jd0NCYmx3UCs0d2NLQnNQcGZuelVIZUdaOGlXN1BpNStZZE1idHR0NwpMYjJKT0g3NTdIcnRaTFFlSUtsRE1FZnNKbWNnU2pVMHZiemhITDFEaHVtQ1hzQzBETXltQkhJbG1pZkFEbFRNCm44TWVrQ2lBWWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 
