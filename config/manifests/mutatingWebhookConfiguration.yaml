---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qWXhNelF3TlRsYUZ3MHlOVEE1TWpZeE16UXdOVGxhTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRRER5UnlHakxiREs4TWMvNkd2bkwyKzBTZ2lySjBNU0x2eXNSVXdtRlJEQXRCdnpHdHYKZ1RYRGZ3OGN6Nng4YTJPSjBCUGc4RFFiRWlMOURrbUVpREM5d2N3NzBqOWxjSVFENlEyd0hoQWErdUJiMzNRZApFOTkrSlNNRU9FSyt2TmhCREJQM0FzSkxUdmp2aXhyTzRxbEplVEdoNmIrbkpFRmJ2UG1LMG9GNm9MUUxSR2JCCmFJTFJuM2lKMUgyZWRodXZtTmFCOXNHZXFEOXczWk83T0lub2VnYTMwb213T002Q3Q1Y2pRMGZhS3pmRHRDd1UKeDVsaGFBN1ExWXpXQUhvQ1lyN0hGUVZlZWdCRndzZUo2c1dYRVVhcFg2UFEwUDFCeEFJNHVmcld0VkRadmR2aQpLRUdlY1ZxdGZRM3E1Yk5EdUVha1ROY0hBREV1RzljM3BBRCtiRHZkNlBmZ0w4bTNORFVWWTVCdmVWdjVzOVQ2CnA2bjhHMWxkc2F2Zit2aWdsNkZ2eDVuSjJQN1hEUlNETzIrZk1hcVhKaEZGNm1SZGtadjlnNWMrcFNZcVVIeEEKZmQvRnRBZHZPaitCWU5vSlVUbHVQZVdueVF6R3F2SjVwbllNQURBYTdGN0U3eThuMXVMODB5cFlwRjdXcGNKZQpxNnAwOXllS0FnbFdSd29sQ0E2RnpnQi9yM05lMkRZc3VDMllKYXNrVnRaeSt3UHhZRHdIYUhSbml1cU8zemVwCnNxRWNRQ3B2UzRzbEtrakIwYmVocFdBWWwyWkFYcHgvKysraUNUS1ZUaExSdXpUcDlIQnpnR1dyREVPTTNRQTMKZmJXK2IxRzNXRmQ5OHk5ZklXd0s5Tk1yNWlFUnRZclBVT1psSCtEd291QU1OdWx2NmQzbVdibnhSUUlEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGRjRzQlFWYnd2endxV1ArQ0JJVlpLYSsKRmliWk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQUZxdlVhTzl4RlFiYmpscS9wTEZFcE9YVzJyQ3A5Y25TWQorUUZyR1k4QUx1R2xXMk1mTXVwS3FwelNNTzRqYzNZcjl0RTdrdTY2Z2FwV3N3T05SeFJFazZvTTROcmM0RjlwCmpyei9YdWxYS296MGQzckx0Q1pndjNUWUJhckpmUjJhaHQ0NUFLMDlFWHpEbUh6Z1RjQ3Z0b2F6Qk4zcVoxVnkKdHdhd2NLZG9xWVJXaGFHTmoybldhVWFweWFOVHVzbFZlZ3g5UjlrS2NTeC8xUVJMVTdiZVhWaGpVTjZRRTQ0ZAplWFN0U2lpdW9FdVVBcnZsUTZhQTlxOUxjUGp4bVpFcEFGT2ZWb1JqeDBqcXZsRm5JZm1FUmxub0ZXVkcyam9OCmU0cEUvWlRROWEzT1U3ckVzaGdQcFRVb2gwb2VXNk9abyt5NDUrVnJPcEZVVmkvQmJvcU1FNVB0ekhnaWJZSFoKRjhZQzBxaUplR1Fnd3E3NDJwWlFrS2xUaGxJeVBSUjUzbEl0THRBZGw2TjE5UUF5Wmd0ci8yOXJFLzBGeTYrMwo3emVYZlVVaW85SXhCN2RxY0RjVzNTbjh1eHZuUGk5R3JLWG1GcTk1dGNickViaXlSMXF1VWhGQ3dnbDk4b29hCjJXNEIwZnVTZkd5Y3RtazFrdGtNV21vR2x1M3pYakJaNTJIeG5LM2U0SXZkeU1MbkhLc1pmOTNZYi9Jb3dMVEMKcDE5WHpxanZFVDl2Ym9xYnhpbjY2cE5UcjE4aFFKWkp3WnQxWXArM1N0c1BWWjFkM0VGc0pGMlJpNEU5eWUwSQpDR1dMc3BsM2x2cW53SU44YmhlR1NrNWxraFJDN1BieW5PZWhVaWtOTk54S2hiMWJhaC8rVGE2cGhJT01BZ2w2CkhtZVU4S2tnWEE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 