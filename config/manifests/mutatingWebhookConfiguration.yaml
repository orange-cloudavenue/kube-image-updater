---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: mutating-webhook-configuration
  namespace: default
webhooks:
  - sideEffects: None 
    admissionReviewVersions: ["v1"]
    name: your.example.com
    clientConfig:
      url: https://your.example.com:8443/mutate
      # service:
      #   name: kimup-webhook-mutating
      #   namespace: default
      #   path: /mutate
      #   port: 8443
      # CA certificate with BEGIN and END lines - base64 encoded
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZFekNDQXZ1Z0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3R3pFWk1CY0dBMVVFQ2hNUWVXOTEKY2k1bGVHRnRjR3hsTG1OdmJUQWVGdzB5TkRBNU1qWXlNREkyTXpCYUZ3MHlOVEE1TWpZeU1ESTJNekJhTUJzeApHVEFYQmdOVkJBb1RFSGx2ZFhJdVpYaGhiWEJzWlM1amIyMHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDCkR3QXdnZ0lLQW9JQ0FRQ2xYeUlSbVJjYkR0T3A2b0NKR0hMNGxIQ1NxaVJRb01TUzhqbkVtNlo1cnNYV1VCaFMKZGx0Z0V1WlJ5aXlKK0hOQ3ZUSit2Y0lLQTAwZm9XaSs3T1pTNG43YkZLYnhBZnUveDNlTENRakZXUkxUeDhIdwpoU2V2OFZMWTkwbGY5aFVSY1NUMjMvaXcwZFlMWVc5Z2RlZnFGa0tJTFdWN05zMElGcWVkaUVVQzQvbnNNYUlhCmlaUVBDR0YrTjVzc1RjOWJaclZrY3FkMjZEemhBanJ0Vy8zcGtPQkZVeHFMUzF3Z1I5ZFNxdGlHQkdqTUhtUUgKa2dVT3NzYmY1NWxVZWNXS0t5SnVNRDgwUHI1VmxiVlpEVUtBQmE3T05NVWlUUlFaRkh6dkU3MDRlRzVmYS9QSgozZmNqaWN0UkFEdTRYRVZvVHpSWFRtZHRjMXZKWlg2M1AzYzhQUUxRdE1jM1Q2Q0gweVdKRGhkT214UmdCYk9QCm5rR09BeFR2WHBzQzk2bXdIYXRpdnJrcERQZ2kzUFcrU0xLV1RZeVh1b0pQMllDWjhTZFA4M3lBYk5LblFwcDgKQXAwV1BXcUVRcVFtU1hBMy91QUlXWHZ4S042dmlRL3I2TXVpNEJXODNLVlN3a2hyclJjWElqYXd4eDh0c25RSQpSRUZoM21HMlh4clozNk5SV3FNQjRDN2pCTHU2WFAxZlErR0hUYUJkM1RRTVg0ejZTQlp2TElBb3R6ZVkrcHFEClZZZlFFTmNrejNIYUtmQitLakxEaHdvSzdSMWhxR29xaVhZOWthY3FtZTVJVVdwVTVVbmRmM0MrN0ErYUsrdGsKby82c0pEQkRGQ05uR3M3QnArWlJFOXhvSEl3RmdpNVk1VTd0alY3d0tBZG1XM2dSV3F6SHNOSy9Ud0lEQVFBQgpvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGSFlOU1JheG53NjZIcytHckdsanZRWmIKaXIwOU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQ2MrZ0RhY3YrWFlLdXErNnRJZjJWRHVtV2h4Wk1MaTZWdAovTmx1YnNKNnhlZTZ6SGtPTStNZUZqQjg1Nlp6MGU0eHdYYTdQWUNYQVgyQ0UzeEZ4ZlNTQ2FkMWw2bUZMV21JClhRRUJUN0pjVHBDMU5JTEM5RWxOcTdqWmFpMzhkeXFOWW0zekVkWFRWRitISlloSjVVY1dTUHNNYUxkb3pBWmEKd1VJazJOQm1QZEJMSWVOeHRHZHNLeEFjc3g1TUhVWmlmOFNvNzE2bElZVEV1RjlwbkRQZ24yOGNaK1pub2x0aApPcjg1eGQwTkhGODVkNVNsWGRGRGdCSEV4YkNzdjN0ZWl5djM2UFhhN3QydzJhVHNnWmE5QmdHb3BXRGRET0pPCnhmZHBMMVNGbnNDU2t2VStHVUl2Tlk0WVVaMHk5ZjNFWHNmOHpKazg5UkRidlRlRTlMZU9CVmJ6aTdTRmxRWHgKUlhIOHJKR1puUUpyekhML1pmaWRBNmpvd0RadUhaMnc5SUd6THovbUlwa25wbUJrUGR3cjNmVmhpVDFZd1BlUwpYRW5rTVplOXo4MHNjM0EzSkxMSHI1WTMrazF3K2lKaFgxZTZqMFFOUkQrcERaajRuVU50eDhNVXplTGYvSU83CkhuSEpFeWNPS2NhRU5PdFBGVWlGSVFIblFnM2dKdFNxTllBQ3dXWlZqQy91TE04MW9neldtMW9Cd1lqdE9oYlEKaFUxdVltK3AyUHVaL2VIRlN0MmxnWUVYUE9CN21zQWZsaE5PSjRCZkpmQktJcHNaTVVsVmxBZUpQS0FvT2x2egppY1BPMktxRktHM2owbGFkQWQ4bGNaK2k4RUtHSWFvVDNRTXg0aWJlL2tHL2kxdEFXbGpkRzMyVllYcEUxNVdVClJCR2xDcGVSS0E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
    rules:
      - operations: [ "CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced" 
        # namespaceSelector:
        #   matchExpressions:
        #     - {key: "name", operator: "In", values: ["core-services"]}
    failurePolicy: Fail
    
 
